/* IMPORTANT
 * This snapshot file is auto-generated, but designed for humans.
 * It should be checked into source control and tracked carefully.
 * Re-generate by setting TAP_SNAPSHOT=1 and running tests.
 * Make sure to inspect the output below.  Do not ignore changes!
 */
"use strict";
exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised file OEBPS/aftermath.xhtml 1`
] = `
VFile {
  "contents": Buffer <3c 3f 78 6d 6c 20 76 65 72 73 69 6f 6e 3d 22 31 2e 30 22 20 65 6e 63 6f 64 69 6e 67 3d 22 55 54 46 2d 38 22 3f 3e 0a 3c 21 44 4f 43 54 59 50 45 20 68 74 6d 6c 20 50 55 42 4c 49 43 20 22 2d 2f 2f 57 33 43 2f 2f 44 54 44 20 58 48 54 4d 4c 20 31 2e 31 2f 2f 45 4e 22 20 22 68 74 74 70 3a 2f 2f 77 77 77 2e 77 33 2e 6f 72 67 2f 54 52 2f 78 68 74 6d 6c 31 31 2f 44 54 44 2f 78 68 74 6d 6c 31 31 2e 64 74 64 22 3e 0a 3c 68 74 6d 6c 20 78 6d 6c 6e 73 3d 22 68 74 74 70 3a 2f 2f 77 77 77 2e 77 33 2e 6f 72 67 2f 31 39 39 39 2f 78 68 74 6d 6c 22 3e 0a 3c 68 65 61 64 3e 0a 3c 74 69 74 6c 65 3e 54 65 73 74 20 66 69 6c 65 0a 3c 2f 74 69 74 6c 65 3e 0a 3c 6c 69 6e 6b 20 68 72 65 66 3d 22 63 73 73 2f 73 74 79 6c 65 2e 63 73 73 22 20 74 79 70 65 3d 22 74 65 78 74 2f 63 73 73 22 20 72 65 6c 3d 22 73 74 79 6c 65 73 68 65 65 74 22 20 2f 3e 0a 3c 2f 68 65 61 64 3e 0a 3c 62 6f 64 79 20 63 6c 61 73 73 3d 22 20 68 69 67 68 6c 69 67 68 74 22 3e 0a 3c 64 69 76 20 63 6c 61 73 73 3d 22 68 69 67 68 6c 69 67 68 74 62 6f 64 79 22 3e 0a 3c 68 31 3e 54 65 73 74 20 66 69 6c 65 3c 2f 68 31 3e 0a 0a 3c 2f 64 69 76 3e 0a 0a 3c 70 3e 3c 61 20 68 72 65 66 3d 22 68 74 74 70 3a 2f 2f 6b 6f 62 6f 2e 63 6f 6d 2f 22 3e 54 68 69 73 20 69 73 20 74 65 73 74 20 74 65 78 74 3c 2f 61 3e 3c 2f 70 3e 0a 0a 0a 3c 2f 62 6f 64 79 3e 0a 3c 2f 68 74 6d 6c 3e 0a>,
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "TMPDIR",
  ],
  "messages": Array [],
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised file OEBPS/aftermath.xhtml.json 1`
] = `
VFile {
  "contents": "{\\n  \\"type\\": \\"root\\",\\n  \\"children\\": [\\n    {\\n      \\"type\\": \\"doctype\\",\\n      \\"name\\": \\"html\\",\\n      \\"public\\": \\"-//W3C//DTD XHTML 1.1//EN\\",\\n      \\"system\\": \\"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\\"\\n    },\\n    {\\n      \\"type\\": \\"element\\",\\n      \\"tagName\\": \\"html\\",\\n      \\"properties\\": {\\n        \\"xmlns\\": \\"http://www.w3.org/1999/xhtml\\"\\n      },\\n      \\"children\\": [\\n        {\\n          \\"type\\": \\"text\\",\\n          \\"value\\": \\"\\\\n\\"\\n        },\\n        {\\n          \\"type\\": \\"element\\",\\n          \\"tagName\\": \\"head\\",\\n          \\"properties\\": {},\\n          \\"children\\": [\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\"\\n            },\\n            {\\n              \\"type\\": \\"element\\",\\n              \\"tagName\\": \\"title\\",\\n              \\"properties\\": {},\\n              \\"children\\": [\\n                {\\n                  \\"type\\": \\"text\\",\\n                  \\"value\\": \\"Test file\\\\n\\"\\n                }\\n              ]\\n            },\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\"\\n            },\\n            {\\n              \\"type\\": \\"element\\",\\n              \\"tagName\\": \\"link\\",\\n              \\"properties\\": {\\n                \\"href\\": \\"css/style.css\\",\\n                \\"type\\": \\"text/css\\",\\n                \\"rel\\": [\\n                  \\"stylesheet\\"\\n                ]\\n              },\\n              \\"children\\": []\\n            },\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\"\\n            }\\n          ]\\n        },\\n        {\\n          \\"type\\": \\"text\\",\\n          \\"value\\": \\"\\\\n\\"\\n        },\\n        {\\n          \\"type\\": \\"element\\",\\n          \\"tagName\\": \\"body\\",\\n          \\"properties\\": {\\n            \\"className\\": [\\n              \\"highlight\\"\\n            ]\\n          },\\n          \\"children\\": [\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\"\\n            },\\n            {\\n              \\"type\\": \\"element\\",\\n              \\"tagName\\": \\"div\\",\\n              \\"properties\\": {\\n                \\"className\\": [\\n                  \\"highlightbody\\"\\n                ],\\n                \\"dataInkLocation\\": 0\\n              },\\n              \\"children\\": [\\n                {\\n                  \\"type\\": \\"text\\",\\n                  \\"value\\": \\"\\\\n\\"\\n                },\\n                {\\n                  \\"type\\": \\"element\\",\\n                  \\"tagName\\": \\"h1\\",\\n                  \\"properties\\": {\\n                    \\"id\\": \\"test-file\\",\\n                    \\"dataInkLocation\\": 1\\n                  },\\n                  \\"children\\": [\\n                    {\\n                      \\"type\\": \\"text\\",\\n                      \\"value\\": \\"Test file\\"\\n                    }\\n                  ]\\n                },\\n                {\\n                  \\"type\\": \\"text\\",\\n                  \\"value\\": \\"\\\\n\\\\n\\"\\n                }\\n              ]\\n            },\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\\\n\\"\\n            },\\n            {\\n              \\"type\\": \\"element\\",\\n              \\"tagName\\": \\"p\\",\\n              \\"properties\\": {\\n                \\"dataInkLocation\\": 2\\n              },\\n              \\"children\\": [\\n                {\\n                  \\"type\\": \\"element\\",\\n                  \\"tagName\\": \\"a\\",\\n                  \\"properties\\": {\\n                    \\"href\\": \\"http://kobo.com/\\"\\n                  },\\n                  \\"children\\": [\\n                    {\\n                      \\"type\\": \\"text\\",\\n                      \\"value\\": \\"This is test text\\"\\n                    }\\n                  ]\\n                }\\n              ]\\n            },\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\\\n\\\\n\\"\\n            }\\n          ]\\n        },\\n        {\\n          \\"type\\": \\"text\\",\\n          \\"value\\": \\"\\\\n\\"\\n        }\\n      ]\\n    }\\n  ],\\n  \\"data\\": {\\n    \\"book\\": {\\n      \\"type\\": \\"Publication\\",\\n      \\"links\\": [],\\n      \\"resources\\": [\\n        {\\n          \\"url\\": \\"OEBPS/toc.ncx\\",\\n          \\"rel\\": [\\n            \\"ncx\\"\\n          ],\\n          \\"encodingFormat\\": \\"application/x-dtbncx+xml\\"\\n        },\\n        {\\n          \\"url\\": \\"OEBPS/css/style.css\\",\\n          \\"rel\\": [],\\n          \\"encodingFormat\\": \\"text/css\\"\\n        },\\n        {\\n          \\"url\\": \\"OEBPS/aftermath.xhtml\\",\\n          \\"rel\\": [],\\n          \\"encodingFormat\\": \\"application/xhtml+xml\\"\\n        },\\n        {\\n          \\"type\\": \\"LinkedResource\\",\\n          \\"rel\\": [\\n            \\"alternate\\",\\n            \\"describedby\\"\\n          ],\\n          \\"url\\": \\"OEBPS/content.opf\\",\\n          \\"encodingFormat\\": \\"application/oebps-package+xml\\"\\n        }\\n      ],\\n      \\"readingOrder\\": [\\n        {\\n          \\"url\\": \\"OEBPS/aftermath.xhtml\\",\\n          \\"rel\\": [],\\n          \\"encodingFormat\\": \\"application/xhtml+xml\\"\\n        }\\n      ],\\n      \\"json\\": {\\n        \\"epubVersion\\": \\"2.0\\"\\n      },\\n      \\"inLanguage\\": \\"en\\",\\n      \\"name\\": \\"Minimal Test File\\",\\n      \\"identifier\\": \\"urn:D35116F7-9AF8-4C13-B348-85E031B31080\\",\\n      \\"creator\\": [\\n        \\"Baldur Bjarnason\\"\\n      ],\\n      \\"publisher\\": [],\\n      \\"author\\": [],\\n      \\"translator\\": [],\\n      \\"illustrator\\": [],\\n      \\"editor\\": [],\\n      \\"colorist\\": [],\\n      \\"contributor\\": [\\n        \\"Baldur Bjarnason\\"\\n      ]\\n    },\\n    \\"resource\\": {\\n      \\"url\\": \\"OEBPS/aftermath.xhtml\\",\\n      \\"rel\\": [],\\n      \\"encodingFormat\\": \\"application/xhtml+xml\\"\\n    },\\n    \\"toc\\": {\\n      \\"type\\": \\"NCX\\",\\n      \\"url\\": \\"OEBPS/toc.ncx\\",\\n      \\"children\\": [\\n        {\\n          \\"label\\": \\"Test content\\",\\n          \\"url\\": \\"OEBPS/aftermath.xhtml\\",\\n          \\"children\\": []\\n        }\\n      ],\\n      \\"heading\\": \\"Test file\\",\\n      \\"inLanguage\\": \\"en\\"\\n    }\\n  }\\n}\\n",
  "cwd": "TMPDIR",
  "data": Object {
    "book": Object {
      "author": Array [],
      "colorist": Array [],
      "contributor": Array [
        "Baldur Bjarnason",
      ],
      "creator": Array [
        "Baldur Bjarnason",
      ],
      "editor": Array [],
      "identifier": "urn:D35116F7-9AF8-4C13-B348-85E031B31080",
      "illustrator": Array [],
      "inLanguage": "en",
      "json": Object {
        "epubVersion": "2.0",
      },
      "links": Array [],
      "name": "Minimal Test File",
      "publisher": Array [],
      "readingOrder": Array [
        Object {
          "encodingFormat": "application/xhtml+xml",
          "rel": Array [],
          "url": "OEBPS/aftermath.xhtml",
        },
      ],
      "resources": Array [
        Object {
          "encodingFormat": "application/x-dtbncx+xml",
          "rel": Array [
            "ncx",
          ],
          "url": "OEBPS/toc.ncx",
        },
        Object {
          "encodingFormat": "text/css",
          "rel": Array [],
          "url": "OEBPS/css/style.css",
        },
        Object {
          "encodingFormat": "application/xhtml+xml",
          "rel": Array [],
          "url": "OEBPS/aftermath.xhtml",
        },
        Object {
          "encodingFormat": "application/oebps-package+xml",
          "rel": Array [
            "alternate",
            "describedby",
          ],
          "type": "LinkedResource",
          "url": "OEBPS/content.opf",
        },
      ],
      "translator": Array [],
      "type": "Publication",
      "wordCount": 6,
    },
    "keyphrases": Array [
      "test text",
      "Test",
    ],
    "keywords": Array [
      "Test",
      "text",
    ],
    "resource": Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "OEBPS/aftermath.xhtml",
    },
    "toc": Object {
      "children": Array [
        Object {
          "children": Array [],
          "label": "Test content",
          "url": "OEBPS/aftermath.xhtml",
        },
      ],
      "heading": "Test file",
      "inLanguage": "en",
      "type": "NCX",
      "url": "OEBPS/toc.ncx",
    },
    "unifiedEngineGiven": true,
    "wordcount": 6,
  },
  "history": Array [
    "OEBPS/aftermath.xhtml",
    "OEBPS/aftermath.json",
    "aftermath.json",
  ],
  "messages": Array [],
  "stored": true,
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised file OEBPS/content.opf 1`
] = `
VFile {
  "contents": Buffer <3c 3f 78 6d 6c 20 76 65 72 73 69 6f 6e 3d 22 31 2e 30 22 20 65 6e 63 6f 64 69 6e 67 3d 22 55 54 46 2d 38 22 3f 3e 0a 3c 70 61 63 6b 61 67 65 20 78 6d 6c 6e 73 3d 22 68 74 74 70 3a 2f 2f 77 77 77 2e 69 64 70 66 2e 6f 72 67 2f 32 30 30 37 2f 6f 70 66 22 20 76 65 72 73 69 6f 6e 3d 22 32 2e 30 22 20 20 75 6e 69 71 75 65 2d 69 64 65 6e 74 69 66 69 65 72 3d 22 75 69 64 22 3e 0a 3c 21 2d 2d 20 0a 32 46 46 30 46 39 33 39 2d 46 42 33 31 2d 34 38 34 36 2d 39 34 38 38 2d 30 35 42 44 46 35 32 34 45 44 44 39 0a 20 2d 2d 3e 0a 20 20 3c 6d 65 74 61 64 61 74 61 20 78 6d 6c 6e 73 3a 64 63 3d 22 68 74 74 70 3a 2f 2f 70 75 72 6c 2e 6f 72 67 2f 64 63 2f 65 6c 65 6d 65 6e 74 73 2f 31 2e 31 2f 22 20 78 6d 6c 6e 73 3a 6f 70 66 3d 22 68 74 74 70 3a 2f 2f 77 77 77 2e 69 64 70 66 2e 6f 72 67 2f 32 30 30 37 2f 6f 70 66 22 3e 0a 20 20 20 20 3c 64 63 3a 74 69 74 6c 65 20 69 64 3d 22 74 69 74 6c 65 22 3e 4d 69 6e 69 6d 61 6c 20 54 65 73 74 20 46 69 6c 65 3c 2f 64 63 3a 74 69 74 6c 65 3e 0a 20 20 20 20 3c 64 63 3a 63 72 65 61 74 6f 72 3e 42 61 6c 64 75 72 20 42 6a 61 72 6e 61 73 6f 6e 3c 2f 64 63 3a 63 72 65 61 74 6f 72 3e 0a 20 20 20 20 3c 64 63 3a 69 64 65 6e 74 69 66 69 65 72 20 69 64 3d 22 75 69 64 22 3e 75 72 6e 3a 44 33 35 31 31 36 46 37 2d 39 41 46 38 2d 34 43 31 33 2d 42 33 34 38 2d 38 35 45 30 33 31 42 33 31 30 38 30 3c 2f 64 63 3a 69 64 65 6e 74 69 66 69 65 72 3e 0a 20 20 20 20 3c 64 63 3a 6c 61 6e 67 75 61 67 65 3e 65 6e 3c 2f 64 63 3a 6c 61 6e 67 75 61 67 65 3e 20 20 20 20 0a 0a 20 20 20 20 3c 64 63 3a 64 61 74 65 3e 32 30 31 33 2d 30 31 2d 31 39 3c 2f 64 63 3a 64 61 74 65 3e 0a 20 20 20 20 3c 64 63 3a 72 69 67 68 74 73 3e 43 6f 70 79 72 69 67 68 74 20 32 30 31 33 20 42 61 6c 64 75 72 20 42 6a 61 72 6e 61 73 6f 6e 3c 2f 64 63 3a 72 69 67 68 74 73 3e 0a 3c 2f 6d 65 74 61 64 61 74 61 3e 0a 20 20 3c 6d 61 6e 69 66 65 73 74 3e 0a 20 20 20 20 3c 69 74 65 6d 20 69 64 3d 22 6e 63 78 22 20 68 72 65 66 3d 22 74 6f 63 2e 6e 63 78 22 20 6d 65 64 69 61 2d 74 79 70 65 3d 22 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 2d 64 74 62 6e 63 78 2b 78 6d 6c 22 20 2f 3e 0a 20 20 20 20 3c 69 74 65 6d 20 69 64 3d 22 73 74 79 6c 65 22 20 68 72 65 66 3d 22 63 73 73 2f 73 74 79 6c 65 2e 63 73 73 22 20 6d 65 64 69 61 2d 74 79 70 65 3d 22 74 65 78 74 2f 63 73 73 22 2f 3e 0a 20 20 20 20 0a 20 20 20 20 0a 0a 09 3c 69 74 65 6d 20 69 64 3d 22 61 66 74 65 72 6d 61 74 68 22 20 68 72 65 66 3d 22 61 66 74 65 72 6d 61 74 68 2e 78 68 74 6d 6c 22 20 6d 65 64 69 61 2d 74 79 70 65 3d 22 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 68 74 6d 6c 2b 78 6d 6c 22 20 2f 3e 20 0a 20 20 3c 2f 6d 61 6e 69 66 65 73 74 3e 0a 20 20 3c 73 70 69 6e 65 20 74 6f 63 3d 22 6e 63 78 22 3e 0a 20 20 3c 69 74 65 6d 72 65 66 20 69 64 72 65 66 3d 22 61 66 74 65 72 6d 61 74 68 22 20 6c 69 6e 65 61 72 3d 22 79 65 73 22 3e 3c 2f 69 74 65 6d 72 65 66 3e 0a 20 20 3c 2f 73 70 69 6e 65 3e 0a 3c 2f 70 61 63 6b 61 67 65 3e>,
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "TMPDIR",
  ],
  "messages": Array [],
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised file OEBPS/css/style.css 1`
] = `
VFile {
  "contents": Buffer <0a 20 20 62 6f 64 79 20 7b 0a 20 20 20 20 63 6f 6c 6f 72 3a 20 62 6c 61 63 6b 3b 0a 20 20 20 20 66 6f 6e 74 2d 66 61 6d 69 6c 79 3a 20 22 47 61 72 61 6d 6f 6e 64 50 72 65 6d 72 50 72 6f 43 61 70 74 22 2c 20 22 49 6f 77 61 6e 20 4f 6c 64 20 53 74 79 6c 65 22 2c 20 73 65 72 69 66 3b 20 7d 0a 0a 20 20 68 31 2c 20 68 32 2c 20 68 33 2c 20 68 34 2c 20 68 35 2c 20 68 36 20 7b 0a 20 20 20 20 66 6f 6e 74 2d 66 61 6d 69 6c 79 3a 20 22 47 61 72 61 6d 6f 6e 64 50 72 65 6d 72 50 72 6f 44 69 73 70 22 2c 20 22 49 6f 77 61 6e 20 4f 6c 64 20 53 74 79 6c 65 22 2c 20 73 65 72 69 66 3b 20 7d 0a 0a 0a 20 20 62 6f 64 79 20 7b 0a 20 20 20 20 66 6f 6e 74 2d 73 69 7a 65 3a 20 31 38 70 78 3b 0a 20 20 20 20 6c 69 6e 65 2d 68 65 69 67 68 74 3a 20 32 32 70 78 3b 20 7d 0a 0a 68 32 20 7b 0a 09 66 6f 6e 74 2d 76 61 72 69 61 6e 74 3a 20 73 6d 61 6c 6c 2d 63 61 70 73 3b 0a 7d 0a 0a 20 20 70 20 2b 20 70 20 7b 0a 20 20 20 20 74 65 78 74 2d 69 6e 64 65 6e 74 3a 20 32 37 70 78 3b 20 7d 0a 0a 70 20 7b 0a 6d 61 72 67 69 6e 3a 20 30 3b 0a 7d 0a 0a 61 20 7b 0a 70 61 64 64 69 6e 67 3a 20 31 30 70 78 3b 0a 63 6f 6c 6f 72 3a 20 77 68 69 74 65 3b 0a 62 61 63 6b 67 72 6f 75 6e 64 2d 63 6f 6c 6f 72 3a 20 62 6c 75 65 3b 0a 7d 0a 0a 61 3a 6c 69 6e 6b 20 7b 0a 63 6f 6c 6f 72 3a 20 77 68 69 74 65 3b 0a 62 61 63 6b 67 72 6f 75 6e 64 2d 63 6f 6c 6f 72 3a 20 62 6c 75 65 3b 0a 7d 0a 0a 0a>,
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "TMPDIR",
  ],
  "messages": Array [],
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised file OEBPS/toc.ncx 1`
] = `
VFile {
  "contents": Buffer <3c 3f 78 6d 6c 20 76 65 72 73 69 6f 6e 3d 22 31 2e 30 22 20 65 6e 63 6f 64 69 6e 67 3d 22 55 54 46 2d 38 22 20 73 74 61 6e 64 61 6c 6f 6e 65 3d 22 6e 6f 22 3f 3e 0a 3c 21 44 4f 43 54 59 50 45 20 6e 63 78 20 50 55 42 4c 49 43 20 22 2d 2f 2f 4e 49 53 4f 2f 2f 44 54 44 20 6e 63 78 20 32 30 30 35 2d 31 2f 2f 45 4e 22 20 22 68 74 74 70 3a 2f 2f 77 77 77 2e 64 61 69 73 79 2e 6f 72 67 2f 7a 33 39 38 36 2f 32 30 30 35 2f 6e 63 78 2d 32 30 30 35 2d 31 2e 64 74 64 22 3e 0a 0a 3c 6e 63 78 20 78 6d 6c 6e 73 3d 22 68 74 74 70 3a 2f 2f 77 77 77 2e 64 61 69 73 79 2e 6f 72 67 2f 7a 33 39 38 36 2f 32 30 30 35 2f 6e 63 78 2f 22 20 76 65 72 73 69 6f 6e 3d 22 32 30 30 35 2d 31 22 3e 0a 20 20 20 20 3c 68 65 61 64 3e 0a 20 20 20 20 20 20 20 20 3c 6d 65 74 61 20 6e 61 6d 65 3d 22 64 74 62 3a 75 69 64 22 20 63 6f 6e 74 65 6e 74 3d 22 75 72 6e 3a 44 30 42 34 35 32 38 44 2d 41 46 38 30 2d 34 41 37 42 2d 38 31 41 44 2d 42 39 46 30 35 43 32 45 36 39 42 34 22 3e 3c 2f 6d 65 74 61 3e 0a 20 20 20 20 20 20 20 20 3c 6d 65 74 61 20 6e 61 6d 65 3d 22 64 74 62 3a 64 65 70 74 68 22 20 63 6f 6e 74 65 6e 74 3d 22 31 22 3e 3c 2f 6d 65 74 61 3e 0a 20 20 20 20 20 20 20 20 3c 6d 65 74 61 20 6e 61 6d 65 3d 22 64 74 62 3a 74 6f 74 61 6c 50 61 67 65 43 6f 75 6e 74 22 20 63 6f 6e 74 65 6e 74 3d 22 30 22 3e 3c 2f 6d 65 74 61 3e 0a 20 20 20 20 20 20 20 20 3c 6d 65 74 61 20 6e 61 6d 65 3d 22 64 74 62 3a 6d 61 78 50 61 67 65 4e 75 6d 62 65 72 22 20 63 6f 6e 74 65 6e 74 3d 22 30 22 3e 3c 2f 6d 65 74 61 3e 0a 20 20 20 20 3c 2f 68 65 61 64 3e 0a 20 20 20 20 3c 64 6f 63 54 69 74 6c 65 3e 0a 20 20 20 20 20 20 20 20 3c 74 65 78 74 3e 54 65 73 74 20 66 69 6c 65 3c 2f 74 65 78 74 3e 0a 20 20 20 20 3c 2f 64 6f 63 54 69 74 6c 65 3e 0a 20 20 20 20 3c 6e 61 76 4d 61 70 3e 0a 20 20 20 20 20 20 20 20 3c 6e 61 76 50 6f 69 6e 74 20 69 64 3d 22 6e 61 76 50 6f 69 6e 74 2d 32 22 20 70 6c 61 79 4f 72 64 65 72 3d 22 31 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6e 61 76 4c 61 62 65 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 74 65 78 74 3e 54 65 73 74 20 63 6f 6e 74 65 6e 74 0a 3c 2f 74 65 78 74 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6e 61 76 4c 61 62 65 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 6e 74 65 6e 74 20 73 72 63 3d 22 61 66 74 65 72 6d 61 74 68 2e 78 68 74 6d 6c 22 3e 3c 2f 63 6f 6e 74 65 6e 74 3e 0a 20 20 20 20 20 20 20 20 3c 2f 6e 61 76 50 6f 69 6e 74 3e 0a 20 20 20 20 3c 2f 6e 61 76 4d 61 70 3e 0a 3c 2f 6e 63 78 3e>,
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "TMPDIR",
  ],
  "messages": Array [],
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised file index.json 1`
] = `
VFile {
  "contents": "{\\"type\\":\\"Publication\\",\\"links\\":[],\\"resources\\":[{\\"url\\":\\"OEBPS/toc.ncx\\",\\"rel\\":[\\"ncx\\"],\\"encodingFormat\\":\\"application/x-dtbncx+xml\\"},{\\"url\\":\\"OEBPS/css/style.css\\",\\"rel\\":[],\\"encodingFormat\\":\\"text/css\\"},{\\"url\\":\\"OEBPS/aftermath.xhtml\\",\\"rel\\":[],\\"encodingFormat\\":\\"application/xhtml+xml\\"},{\\"type\\":\\"LinkedResource\\",\\"rel\\":[\\"alternate\\",\\"describedby\\"],\\"url\\":\\"OEBPS/content.opf\\",\\"encodingFormat\\":\\"application/oebps-package+xml\\"}],\\"readingOrder\\":[{\\"url\\":\\"OEBPS/aftermath.xhtml\\",\\"rel\\":[],\\"encodingFormat\\":\\"application/xhtml+xml\\"}],\\"json\\":{\\"epubVersion\\":\\"2.0\\"},\\"inLanguage\\":\\"en\\",\\"name\\":\\"Minimal Test File\\",\\"identifier\\":\\"urn:D35116F7-9AF8-4C13-B348-85E031B31080\\",\\"creator\\":[\\"Baldur Bjarnason\\"],\\"publisher\\":[],\\"author\\":[],\\"translator\\":[],\\"illustrator\\":[],\\"editor\\":[],\\"colorist\\":[],\\"contributor\\":[\\"Baldur Bjarnason\\"]}",
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "index.json",
  ],
  "messages": Array [],
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised first result 1`
] = `
Object {
  "author": Array [],
  "colorist": Array [],
  "contributor": Array [
    "Baldur Bjarnason",
  ],
  "creator": Array [
    "Baldur Bjarnason",
  ],
  "editor": Array [],
  "identifier": "urn:D35116F7-9AF8-4C13-B348-85E031B31080",
  "illustrator": Array [],
  "inLanguage": "en",
  "json": Object {
    "epubVersion": "2.0",
  },
  "links": Array [],
  "name": "Minimal Test File",
  "publisher": Array [],
  "readingOrder": Array [
    Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "uploaded/OEBPS/aftermath.xhtml",
    },
  ],
  "resources": Array [
    Object {
      "encodingFormat": "application/x-dtbncx+xml",
      "rel": Array [
        "ncx",
      ],
      "url": "uploaded/OEBPS/toc.ncx",
    },
    Object {
      "encodingFormat": "text/css",
      "rel": Array [],
      "url": "uploaded/OEBPS/css/style.css",
    },
    Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "uploaded/OEBPS/aftermath.xhtml",
    },
    Object {
      "encodingFormat": "application/oebps-package+xml",
      "rel": Array [
        "alternate",
        "describedby",
      ],
      "type": "LinkedResource",
      "url": "uploaded/OEBPS/content.opf",
    },
  ],
  "translator": Array [],
  "type": "Publication",
  "wordCount": 6,
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised resource OEBPS/aftermath.xhtml 1`
] = `
Object {
  "encodingFormat": "application/xhtml+xml",
  "rel": Array [],
  "url": "OEBPS/aftermath.xhtml",
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised resource OEBPS/aftermath.xhtml.json 1`
] = `
Object {
  "encodingFormat": "application/json",
  "rel": Array [],
  "url": "OEBPS/aftermath.xhtml.json",
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised resource OEBPS/content.opf 1`
] = `
Object {
  "encodingFormat": "application/oebps-package+xml",
  "rel": Array [
    "alternate",
    "describedby",
  ],
  "type": "LinkedResource",
  "url": "OEBPS/content.opf",
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised resource OEBPS/css/style.css 1`
] = `
Object {
  "encodingFormat": "text/css",
  "rel": Array [],
  "url": "OEBPS/css/style.css",
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised resource OEBPS/toc.ncx 1`
] = `
Object {
  "encodingFormat": "application/x-dtbncx+xml",
  "rel": Array [
    "ncx",
  ],
  "url": "OEBPS/toc.ncx",
}
`;

exports[
  `tests/epub.test.js TAP epub process - sanitise false > epub unsanitised resource index.json 1`
] = `
Object {
  "author": Array [],
  "colorist": Array [],
  "contributor": Array [
    "Baldur Bjarnason",
  ],
  "creator": Array [
    "Baldur Bjarnason",
  ],
  "editor": Array [],
  "identifier": "urn:D35116F7-9AF8-4C13-B348-85E031B31080",
  "illustrator": Array [],
  "inLanguage": "en",
  "json": Object {
    "epubVersion": "2.0",
  },
  "links": Array [],
  "name": "Minimal Test File",
  "publisher": Array [],
  "readingOrder": Array [
    Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "OEBPS/aftermath.xhtml",
    },
  ],
  "resources": Array [
    Object {
      "encodingFormat": "application/x-dtbncx+xml",
      "rel": Array [
        "ncx",
      ],
      "url": "OEBPS/toc.ncx",
    },
    Object {
      "encodingFormat": "text/css",
      "rel": Array [],
      "url": "OEBPS/css/style.css",
    },
    Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "OEBPS/aftermath.xhtml",
    },
    Object {
      "encodingFormat": "application/oebps-package+xml",
      "rel": Array [
        "alternate",
        "describedby",
      ],
      "type": "LinkedResource",
      "url": "OEBPS/content.opf",
    },
  ],
  "translator": Array [],
  "type": "Publication",
  "url": "index.json",
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub file OEBPS/aftermath.xhtml 1`
] = `
VFile {
  "contents": "<!DOCTYPE html PUBLIC \\"-//W3C//DTD XHTML 1.1//EN\\" \\"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\\"><html xmlns=\\"http://www.w3.org/1999/xhtml\\">\\n<head>\\n<title>Test file\\n</title>\\n<link rel=\\"stylesheet\\" type=\\"text/css\\" href=\\"css/style.css\\" />\\n</head>\\n<body class=\\"highlight\\">\\n<div class=\\"highlightbody\\">\\n<h1>Test file</h1>\\n\\n</div>\\n\\n<p><a href=\\"http://kobo.com/\\">This is test text</a></p>\\n\\n\\n</body>\\n</html>",
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "TMPDIR",
  ],
  "messages": Array [],
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub file OEBPS/aftermath.xhtml.json 1`
] = `
VFile {
  "contents": "{\\n  \\"type\\": \\"root\\",\\n  \\"children\\": [\\n    {\\n      \\"type\\": \\"doctype\\",\\n      \\"name\\": \\"html\\",\\n      \\"public\\": \\"-//W3C//DTD XHTML 1.1//EN\\",\\n      \\"system\\": \\"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\\"\\n    },\\n    {\\n      \\"type\\": \\"element\\",\\n      \\"tagName\\": \\"html\\",\\n      \\"properties\\": {\\n        \\"xmlns\\": \\"http://www.w3.org/1999/xhtml\\"\\n      },\\n      \\"children\\": [\\n        {\\n          \\"type\\": \\"text\\",\\n          \\"value\\": \\"\\\\n\\"\\n        },\\n        {\\n          \\"type\\": \\"element\\",\\n          \\"tagName\\": \\"head\\",\\n          \\"properties\\": {},\\n          \\"children\\": [\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\"\\n            },\\n            {\\n              \\"type\\": \\"element\\",\\n              \\"tagName\\": \\"title\\",\\n              \\"properties\\": {},\\n              \\"children\\": [\\n                {\\n                  \\"type\\": \\"text\\",\\n                  \\"value\\": \\"Test file\\\\n\\"\\n                }\\n              ]\\n            },\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\"\\n            },\\n            {\\n              \\"type\\": \\"element\\",\\n              \\"tagName\\": \\"link\\",\\n              \\"properties\\": {\\n                \\"rel\\": [\\n                  \\"stylesheet\\"\\n                ],\\n                \\"type\\": \\"text/css\\",\\n                \\"href\\": \\"css/style.css\\"\\n              },\\n              \\"children\\": []\\n            },\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\"\\n            }\\n          ]\\n        },\\n        {\\n          \\"type\\": \\"text\\",\\n          \\"value\\": \\"\\\\n\\"\\n        },\\n        {\\n          \\"type\\": \\"element\\",\\n          \\"tagName\\": \\"body\\",\\n          \\"properties\\": {\\n            \\"className\\": [\\n              \\"highlight\\"\\n            ]\\n          },\\n          \\"children\\": [\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\"\\n            },\\n            {\\n              \\"type\\": \\"element\\",\\n              \\"tagName\\": \\"div\\",\\n              \\"properties\\": {\\n                \\"className\\": [\\n                  \\"highlightbody\\"\\n                ],\\n                \\"dataInkLocation\\": 0\\n              },\\n              \\"children\\": [\\n                {\\n                  \\"type\\": \\"text\\",\\n                  \\"value\\": \\"\\\\n\\"\\n                },\\n                {\\n                  \\"type\\": \\"element\\",\\n                  \\"tagName\\": \\"h1\\",\\n                  \\"properties\\": {\\n                    \\"id\\": \\"test-file\\",\\n                    \\"dataInkLocation\\": 1\\n                  },\\n                  \\"children\\": [\\n                    {\\n                      \\"type\\": \\"text\\",\\n                      \\"value\\": \\"Test file\\"\\n                    }\\n                  ]\\n                },\\n                {\\n                  \\"type\\": \\"text\\",\\n                  \\"value\\": \\"\\\\n\\\\n\\"\\n                }\\n              ]\\n            },\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\\\n\\"\\n            },\\n            {\\n              \\"type\\": \\"element\\",\\n              \\"tagName\\": \\"p\\",\\n              \\"properties\\": {\\n                \\"dataInkLocation\\": 2\\n              },\\n              \\"children\\": [\\n                {\\n                  \\"type\\": \\"element\\",\\n                  \\"tagName\\": \\"a\\",\\n                  \\"properties\\": {\\n                    \\"href\\": \\"http://kobo.com/\\"\\n                  },\\n                  \\"children\\": [\\n                    {\\n                      \\"type\\": \\"text\\",\\n                      \\"value\\": \\"This is test text\\"\\n                    }\\n                  ]\\n                }\\n              ]\\n            },\\n            {\\n              \\"type\\": \\"text\\",\\n              \\"value\\": \\"\\\\n\\\\n\\\\n\\"\\n            }\\n          ]\\n        },\\n        {\\n          \\"type\\": \\"text\\",\\n          \\"value\\": \\"\\\\n\\"\\n        }\\n      ]\\n    }\\n  ],\\n  \\"data\\": {\\n    \\"book\\": {\\n      \\"type\\": \\"Publication\\",\\n      \\"links\\": [],\\n      \\"resources\\": [\\n        {\\n          \\"url\\": \\"OEBPS/toc.ncx\\",\\n          \\"rel\\": [\\n            \\"ncx\\"\\n          ],\\n          \\"encodingFormat\\": \\"application/x-dtbncx+xml\\"\\n        },\\n        {\\n          \\"url\\": \\"OEBPS/css/style.css\\",\\n          \\"rel\\": [],\\n          \\"encodingFormat\\": \\"text/css\\"\\n        },\\n        {\\n          \\"url\\": \\"OEBPS/test.js\\",\\n          \\"rel\\": [],\\n          \\"encodingFormat\\": \\"application/javascript\\"\\n        },\\n        {\\n          \\"url\\": \\"OEBPS/aftermath.xhtml\\",\\n          \\"rel\\": [],\\n          \\"encodingFormat\\": \\"application/xhtml+xml\\"\\n        },\\n        {\\n          \\"type\\": \\"LinkedResource\\",\\n          \\"rel\\": [\\n            \\"alternate\\",\\n            \\"describedby\\"\\n          ],\\n          \\"url\\": \\"OEBPS/content.opf\\",\\n          \\"encodingFormat\\": \\"application/oebps-package+xml\\"\\n        }\\n      ],\\n      \\"readingOrder\\": [\\n        {\\n          \\"url\\": \\"OEBPS/aftermath.xhtml\\",\\n          \\"rel\\": [],\\n          \\"encodingFormat\\": \\"application/xhtml+xml\\"\\n        }\\n      ],\\n      \\"json\\": {\\n        \\"epubVersion\\": \\"2.0\\"\\n      },\\n      \\"inLanguage\\": \\"en\\",\\n      \\"name\\": \\"Minimal Test File\\",\\n      \\"identifier\\": \\"urn:D35116F7-9AF8-4C13-B348-85E031B31080\\",\\n      \\"creator\\": [\\n        \\"Baldur Bjarnason\\"\\n      ],\\n      \\"publisher\\": [],\\n      \\"author\\": [],\\n      \\"translator\\": [],\\n      \\"illustrator\\": [],\\n      \\"editor\\": [],\\n      \\"colorist\\": [],\\n      \\"contributor\\": [\\n        \\"Baldur Bjarnason\\"\\n      ]\\n    },\\n    \\"resource\\": {\\n      \\"url\\": \\"OEBPS/aftermath.xhtml\\",\\n      \\"rel\\": [],\\n      \\"encodingFormat\\": \\"application/xhtml+xml\\"\\n    },\\n    \\"toc\\": {\\n      \\"type\\": \\"NCX\\",\\n      \\"url\\": \\"OEBPS/toc.ncx\\",\\n      \\"children\\": [\\n        {\\n          \\"label\\": \\"Test content\\",\\n          \\"url\\": \\"OEBPS/aftermath.xhtml\\",\\n          \\"children\\": []\\n        }\\n      ],\\n      \\"heading\\": \\"Test file\\",\\n      \\"inLanguage\\": \\"en\\"\\n    }\\n  }\\n}\\n",
  "cwd": "TMPDIR",
  "data": Object {
    "book": Object {
      "author": Array [],
      "colorist": Array [],
      "contributor": Array [
        "Baldur Bjarnason",
      ],
      "creator": Array [
        "Baldur Bjarnason",
      ],
      "editor": Array [],
      "identifier": "urn:D35116F7-9AF8-4C13-B348-85E031B31080",
      "illustrator": Array [],
      "inLanguage": "en",
      "json": Object {
        "epubVersion": "2.0",
      },
      "links": Array [],
      "name": "Minimal Test File",
      "publisher": Array [],
      "readingOrder": Array [
        Object {
          "encodingFormat": "application/xhtml+xml",
          "rel": Array [],
          "url": "OEBPS/aftermath.xhtml",
        },
      ],
      "resources": Array [
        Object {
          "encodingFormat": "application/x-dtbncx+xml",
          "rel": Array [
            "ncx",
          ],
          "url": "OEBPS/toc.ncx",
        },
        Object {
          "encodingFormat": "text/css",
          "rel": Array [],
          "url": "OEBPS/css/style.css",
        },
        Object {
          "encodingFormat": "application/javascript",
          "rel": Array [],
          "url": "OEBPS/test.js",
        },
        Object {
          "encodingFormat": "application/xhtml+xml",
          "rel": Array [],
          "url": "OEBPS/aftermath.xhtml",
        },
        Object {
          "encodingFormat": "application/oebps-package+xml",
          "rel": Array [
            "alternate",
            "describedby",
          ],
          "type": "LinkedResource",
          "url": "OEBPS/content.opf",
        },
      ],
      "translator": Array [],
      "type": "Publication",
      "wordCount": 6,
    },
    "keyphrases": Array [
      "test text",
      "Test",
    ],
    "keywords": Array [
      "Test",
      "text",
    ],
    "resource": Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "OEBPS/aftermath.xhtml",
    },
    "toc": Object {
      "children": Array [
        Object {
          "children": Array [],
          "label": "Test content",
          "url": "OEBPS/aftermath.xhtml",
        },
      ],
      "heading": "Test file",
      "inLanguage": "en",
      "type": "NCX",
      "url": "OEBPS/toc.ncx",
    },
    "unifiedEngineGiven": true,
    "wordcount": 6,
  },
  "history": Array [
    "OEBPS/aftermath.xhtml",
    "OEBPS/aftermath.json",
    "aftermath.json",
  ],
  "messages": Array [],
  "stored": true,
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub file OEBPS/content.opf 1`
] = `
VFile {
  "contents": Buffer <3c 3f 78 6d 6c 20 76 65 72 73 69 6f 6e 3d 22 31 2e 30 22 20 65 6e 63 6f 64 69 6e 67 3d 22 55 54 46 2d 38 22 3f 3e 0a 3c 70 61 63 6b 61 67 65 20 78 6d 6c 6e 73 3d 22 68 74 74 70 3a 2f 2f 77 77 77 2e 69 64 70 66 2e 6f 72 67 2f 32 30 30 37 2f 6f 70 66 22 20 76 65 72 73 69 6f 6e 3d 22 32 2e 30 22 20 20 75 6e 69 71 75 65 2d 69 64 65 6e 74 69 66 69 65 72 3d 22 75 69 64 22 3e 0a 3c 21 2d 2d 20 0a 32 46 46 30 46 39 33 39 2d 46 42 33 31 2d 34 38 34 36 2d 39 34 38 38 2d 30 35 42 44 46 35 32 34 45 44 44 39 0a 20 2d 2d 3e 0a 20 20 3c 6d 65 74 61 64 61 74 61 20 78 6d 6c 6e 73 3a 64 63 3d 22 68 74 74 70 3a 2f 2f 70 75 72 6c 2e 6f 72 67 2f 64 63 2f 65 6c 65 6d 65 6e 74 73 2f 31 2e 31 2f 22 20 78 6d 6c 6e 73 3a 6f 70 66 3d 22 68 74 74 70 3a 2f 2f 77 77 77 2e 69 64 70 66 2e 6f 72 67 2f 32 30 30 37 2f 6f 70 66 22 3e 0a 20 20 20 20 3c 64 63 3a 74 69 74 6c 65 20 69 64 3d 22 74 69 74 6c 65 22 3e 4d 69 6e 69 6d 61 6c 20 54 65 73 74 20 46 69 6c 65 3c 2f 64 63 3a 74 69 74 6c 65 3e 0a 20 20 20 20 3c 64 63 3a 63 72 65 61 74 6f 72 3e 42 61 6c 64 75 72 20 42 6a 61 72 6e 61 73 6f 6e 3c 2f 64 63 3a 63 72 65 61 74 6f 72 3e 0a 20 20 20 20 3c 64 63 3a 69 64 65 6e 74 69 66 69 65 72 20 69 64 3d 22 75 69 64 22 3e 75 72 6e 3a 44 33 35 31 31 36 46 37 2d 39 41 46 38 2d 34 43 31 33 2d 42 33 34 38 2d 38 35 45 30 33 31 42 33 31 30 38 30 3c 2f 64 63 3a 69 64 65 6e 74 69 66 69 65 72 3e 0a 20 20 20 20 3c 64 63 3a 6c 61 6e 67 75 61 67 65 3e 65 6e 3c 2f 64 63 3a 6c 61 6e 67 75 61 67 65 3e 20 20 20 20 0a 0a 20 20 20 20 3c 64 63 3a 64 61 74 65 3e 32 30 31 33 2d 30 31 2d 31 39 3c 2f 64 63 3a 64 61 74 65 3e 0a 20 20 20 20 3c 64 63 3a 72 69 67 68 74 73 3e 43 6f 70 79 72 69 67 68 74 20 32 30 31 33 20 42 61 6c 64 75 72 20 42 6a 61 72 6e 61 73 6f 6e 3c 2f 64 63 3a 72 69 67 68 74 73 3e 0a 3c 2f 6d 65 74 61 64 61 74 61 3e 0a 20 20 3c 6d 61 6e 69 66 65 73 74 3e 0a 20 20 20 20 3c 69 74 65 6d 20 69 64 3d 22 6e 63 78 22 20 68 72 65 66 3d 22 74 6f 63 2e 6e 63 78 22 20 6d 65 64 69 61 2d 74 79 70 65 3d 22 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 2d 64 74 62 6e 63 78 2b 78 6d 6c 22 20 2f 3e 0a 20 20 20 20 3c 69 74 65 6d 20 69 64 3d 22 73 74 79 6c 65 22 20 68 72 65 66 3d 22 63 73 73 2f 73 74 79 6c 65 2e 63 73 73 22 20 6d 65 64 69 61 2d 74 79 70 65 3d 22 74 65 78 74 2f 63 73 73 22 2f 3e 0a 20 20 20 20 3c 69 74 65 6d 20 69 64 3d 22 6a 73 22 20 68 72 65 66 3d 22 74 65 73 74 2e 6a 73 22 20 6d 65 64 69 61 2d 74 79 70 65 3d 22 61 70 70 6c 69 63 61 74 69 6f 6e 2f 6a 61 76 61 73 63 72 69 70 74 22 2f 3e 0a 20 20 20 20 0a 20 20 20 20 0a 0a 09 3c 69 74 65 6d 20 69 64 3d 22 61 66 74 65 72 6d 61 74 68 22 20 68 72 65 66 3d 22 61 66 74 65 72 6d 61 74 68 2e 78 68 74 6d 6c 22 20 6d 65 64 69 61 2d 74 79 70 65 3d 22 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 68 74 6d 6c 2b 78 6d 6c 22 20 2f 3e 20 0a 20 20 3c 2f 6d 61 6e 69 66 65 73 74 3e 0a 20 20 3c 73 70 69 6e 65 20 74 6f 63 3d 22 6e 63 78 22 3e 0a 20 20 3c 69 74 65 6d 72 65 66 20 69 64 72 65 66 3d 22 61 66 74 65 72 6d 61 74 68 22 20 6c 69 6e 65 61 72 3d 22 79 65 73 22 3e 3c 2f 69 74 65 6d 72 65 66 3e 0a 20 20 3c 2f 73 70 69 6e 65 3e 0a 3c 2f 70 61 63 6b 61 67 65 3e>,
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "TMPDIR",
  ],
  "messages": Array [],
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub file OEBPS/css/style.css 1`
] = `
VFile {
  "contents": "\\n  #ink-engine ink-body {\\n    color: black;\\n    font-family: \\"GaramondPremrProCapt\\", \\"Iowan Old Style\\", serif; }\\n\\n  #ink-engine h1, #ink-engine h2, #ink-engine h3, #ink-engine h4, #ink-engine h5, #ink-engine h6 {\\n    font-family: \\"GaramondPremrProDisp\\", \\"Iowan Old Style\\", serif; }\\n\\n\\n  #ink-engine ink-body {\\n    font-size: 18px;\\n    line-height: 22px; }\\n\\n#ink-engine h2 {\\n\\tfont-variant: small-caps;\\n}\\n\\n  #ink-engine p + p {\\n    text-indent: 27px; }\\n\\n#ink-engine p {\\nmargin: 0;\\n}\\n\\n#ink-engine a {\\npadding: 10px;\\ncolor: white;\\nbackground-color: blue;\\n}\\n\\n#ink-engine a:link {\\ncolor: white;\\nbackground-color: blue;\\n}\\n\\n\\n",
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "TMPDIR",
  ],
  "messages": Array [],
}
`;

exports[`tests/epub.test.js TAP epub process > epub file OEBPS/toc.ncx 1`] = `
VFile {
  "contents": Buffer <3c 3f 78 6d 6c 20 76 65 72 73 69 6f 6e 3d 22 31 2e 30 22 20 65 6e 63 6f 64 69 6e 67 3d 22 55 54 46 2d 38 22 20 73 74 61 6e 64 61 6c 6f 6e 65 3d 22 6e 6f 22 3f 3e 0a 3c 21 44 4f 43 54 59 50 45 20 6e 63 78 20 50 55 42 4c 49 43 20 22 2d 2f 2f 4e 49 53 4f 2f 2f 44 54 44 20 6e 63 78 20 32 30 30 35 2d 31 2f 2f 45 4e 22 20 22 68 74 74 70 3a 2f 2f 77 77 77 2e 64 61 69 73 79 2e 6f 72 67 2f 7a 33 39 38 36 2f 32 30 30 35 2f 6e 63 78 2d 32 30 30 35 2d 31 2e 64 74 64 22 3e 0a 0a 3c 6e 63 78 20 78 6d 6c 6e 73 3d 22 68 74 74 70 3a 2f 2f 77 77 77 2e 64 61 69 73 79 2e 6f 72 67 2f 7a 33 39 38 36 2f 32 30 30 35 2f 6e 63 78 2f 22 20 76 65 72 73 69 6f 6e 3d 22 32 30 30 35 2d 31 22 3e 0a 20 20 20 20 3c 68 65 61 64 3e 0a 20 20 20 20 20 20 20 20 3c 6d 65 74 61 20 6e 61 6d 65 3d 22 64 74 62 3a 75 69 64 22 20 63 6f 6e 74 65 6e 74 3d 22 75 72 6e 3a 44 33 35 31 31 36 46 37 2d 39 41 46 38 2d 34 43 31 33 2d 42 33 34 38 2d 38 35 45 30 33 31 42 33 31 30 38 30 22 3e 3c 2f 6d 65 74 61 3e 0a 20 20 20 20 20 20 20 20 3c 6d 65 74 61 20 6e 61 6d 65 3d 22 64 74 62 3a 64 65 70 74 68 22 20 63 6f 6e 74 65 6e 74 3d 22 31 22 3e 3c 2f 6d 65 74 61 3e 0a 20 20 20 20 20 20 20 20 3c 6d 65 74 61 20 6e 61 6d 65 3d 22 64 74 62 3a 74 6f 74 61 6c 50 61 67 65 43 6f 75 6e 74 22 20 63 6f 6e 74 65 6e 74 3d 22 30 22 3e 3c 2f 6d 65 74 61 3e 0a 20 20 20 20 20 20 20 20 3c 6d 65 74 61 20 6e 61 6d 65 3d 22 64 74 62 3a 6d 61 78 50 61 67 65 4e 75 6d 62 65 72 22 20 63 6f 6e 74 65 6e 74 3d 22 30 22 3e 3c 2f 6d 65 74 61 3e 0a 20 20 20 20 3c 2f 68 65 61 64 3e 0a 20 20 20 20 3c 64 6f 63 54 69 74 6c 65 3e 0a 20 20 20 20 20 20 20 20 3c 74 65 78 74 3e 54 65 73 74 20 66 69 6c 65 3c 2f 74 65 78 74 3e 0a 20 20 20 20 3c 2f 64 6f 63 54 69 74 6c 65 3e 0a 20 20 20 20 3c 6e 61 76 4d 61 70 3e 0a 20 20 20 20 20 20 20 20 3c 6e 61 76 50 6f 69 6e 74 20 69 64 3d 22 6e 61 76 50 6f 69 6e 74 2d 32 22 20 70 6c 61 79 4f 72 64 65 72 3d 22 31 22 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 6e 61 76 4c 61 62 65 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 74 65 78 74 3e 54 65 73 74 20 63 6f 6e 74 65 6e 74 0a 3c 2f 74 65 78 74 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 6e 61 76 4c 61 62 65 6c 3e 0a 20 20 20 20 20 20 20 20 20 20 20 20 3c 63 6f 6e 74 65 6e 74 20 73 72 63 3d 22 61 66 74 65 72 6d 61 74 68 2e 78 68 74 6d 6c 22 3e 3c 2f 63 6f 6e 74 65 6e 74 3e 0a 20 20 20 20 20 20 20 20 3c 2f 6e 61 76 50 6f 69 6e 74 3e 0a 20 20 20 20 3c 2f 6e 61 76 4d 61 70 3e 0a 3c 2f 6e 63 78 3e>,
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "TMPDIR",
  ],
  "messages": Array [],
}
`;

exports[`tests/epub.test.js TAP epub process > epub file index.json 1`] = `
VFile {
  "contents": "{\\"type\\":\\"Publication\\",\\"links\\":[],\\"resources\\":[{\\"url\\":\\"OEBPS/toc.ncx\\",\\"rel\\":[\\"ncx\\"],\\"encodingFormat\\":\\"application/x-dtbncx+xml\\"},{\\"url\\":\\"OEBPS/css/style.css\\",\\"rel\\":[],\\"encodingFormat\\":\\"text/css\\"},{\\"url\\":\\"OEBPS/test.js\\",\\"rel\\":[],\\"encodingFormat\\":\\"application/javascript\\"},{\\"url\\":\\"OEBPS/aftermath.xhtml\\",\\"rel\\":[],\\"encodingFormat\\":\\"application/xhtml+xml\\"},{\\"type\\":\\"LinkedResource\\",\\"rel\\":[\\"alternate\\",\\"describedby\\"],\\"url\\":\\"OEBPS/content.opf\\",\\"encodingFormat\\":\\"application/oebps-package+xml\\"}],\\"readingOrder\\":[{\\"url\\":\\"OEBPS/aftermath.xhtml\\",\\"rel\\":[],\\"encodingFormat\\":\\"application/xhtml+xml\\"}],\\"json\\":{\\"epubVersion\\":\\"2.0\\"},\\"inLanguage\\":\\"en\\",\\"name\\":\\"Minimal Test File\\",\\"identifier\\":\\"urn:D35116F7-9AF8-4C13-B348-85E031B31080\\",\\"creator\\":[\\"Baldur Bjarnason\\"],\\"publisher\\":[],\\"author\\":[],\\"translator\\":[],\\"illustrator\\":[],\\"editor\\":[],\\"colorist\\":[],\\"contributor\\":[\\"Baldur Bjarnason\\"]}",
  "cwd": "/Users/baldurbjarnason/Projects/ink-engine",
  "data": Object {},
  "history": Array [
    "index.json",
  ],
  "messages": Array [],
}
`;

exports[`tests/epub.test.js TAP epub process > epub first result 1`] = `
Object {
  "author": Array [],
  "colorist": Array [],
  "contributor": Array [
    "Baldur Bjarnason",
  ],
  "creator": Array [
    "Baldur Bjarnason",
  ],
  "editor": Array [],
  "identifier": "urn:D35116F7-9AF8-4C13-B348-85E031B31080",
  "illustrator": Array [],
  "inLanguage": "en",
  "json": Object {
    "epubVersion": "2.0",
  },
  "links": Array [],
  "name": "Minimal Test File",
  "publisher": Array [],
  "readingOrder": Array [
    Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "uploaded/OEBPS/aftermath.xhtml",
    },
  ],
  "resources": Array [
    Object {
      "encodingFormat": "application/x-dtbncx+xml",
      "rel": Array [
        "ncx",
      ],
      "url": "uploaded/OEBPS/toc.ncx",
    },
    Object {
      "encodingFormat": "text/css",
      "rel": Array [],
      "url": "uploaded/OEBPS/css/style.css",
    },
    Object {
      "encodingFormat": "application/javascript",
      "rel": Array [],
      "url": undefined,
    },
    Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "uploaded/OEBPS/aftermath.xhtml",
    },
    Object {
      "encodingFormat": "application/oebps-package+xml",
      "rel": Array [
        "alternate",
        "describedby",
      ],
      "type": "LinkedResource",
      "url": "uploaded/OEBPS/content.opf",
    },
  ],
  "translator": Array [],
  "type": "Publication",
  "wordCount": 6,
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub resource OEBPS/aftermath.xhtml 1`
] = `
Object {
  "encodingFormat": "application/xhtml+xml",
  "rel": Array [],
  "url": "OEBPS/aftermath.xhtml",
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub resource OEBPS/aftermath.xhtml.json 1`
] = `
Object {
  "encodingFormat": "application/json",
  "rel": Array [],
  "url": "OEBPS/aftermath.xhtml.json",
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub resource OEBPS/content.opf 1`
] = `
Object {
  "encodingFormat": "application/oebps-package+xml",
  "rel": Array [
    "alternate",
    "describedby",
  ],
  "type": "LinkedResource",
  "url": "OEBPS/content.opf",
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub resource OEBPS/css/style.css 1`
] = `
Object {
  "encodingFormat": "text/css",
  "rel": Array [],
  "url": "OEBPS/css/style.css",
}
`;

exports[
  `tests/epub.test.js TAP epub process > epub resource OEBPS/toc.ncx 1`
] = `
Object {
  "encodingFormat": "application/x-dtbncx+xml",
  "rel": Array [
    "ncx",
  ],
  "url": "OEBPS/toc.ncx",
}
`;

exports[`tests/epub.test.js TAP epub process > epub resource index.json 1`] = `
Object {
  "author": Array [],
  "colorist": Array [],
  "contributor": Array [
    "Baldur Bjarnason",
  ],
  "creator": Array [
    "Baldur Bjarnason",
  ],
  "editor": Array [],
  "identifier": "urn:D35116F7-9AF8-4C13-B348-85E031B31080",
  "illustrator": Array [],
  "inLanguage": "en",
  "json": Object {
    "epubVersion": "2.0",
  },
  "links": Array [],
  "name": "Minimal Test File",
  "publisher": Array [],
  "readingOrder": Array [
    Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "OEBPS/aftermath.xhtml",
    },
  ],
  "resources": Array [
    Object {
      "encodingFormat": "application/x-dtbncx+xml",
      "rel": Array [
        "ncx",
      ],
      "url": "OEBPS/toc.ncx",
    },
    Object {
      "encodingFormat": "text/css",
      "rel": Array [],
      "url": "OEBPS/css/style.css",
    },
    Object {
      "encodingFormat": "application/javascript",
      "rel": Array [],
      "url": "OEBPS/test.js",
    },
    Object {
      "encodingFormat": "application/xhtml+xml",
      "rel": Array [],
      "url": "OEBPS/aftermath.xhtml",
    },
    Object {
      "encodingFormat": "application/oebps-package+xml",
      "rel": Array [
        "alternate",
        "describedby",
      ],
      "type": "LinkedResource",
      "url": "OEBPS/content.opf",
    },
  ],
  "translator": Array [],
  "type": "Publication",
  "url": "index.json",
}
`;
